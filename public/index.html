<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard | Monitor BTC/USDT</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="profile" data-tip="Painel lateral com navega√ß√£o.">
        <div class="avatar">‚Çø</div>
        <div class="who">
          <span class="hello">Hi, Trader</span>
          <small class="muted">Crypto Monitor</small>
        </div>
      </div>
      <nav class="nav">
        <div class="nav-group">
          <a class="nav-item active" href="#" data-tip="Vis√£o geral do dashboard."><span class="ico">‚ñ£</span>Dashboard</a>
          <a class="nav-item" href="#" data-tip="Resumo e atalhos."><span class="ico">‚ò∞</span>Overview</a>
          <a class="nav-item" href="#" data-tip="Estat√≠sticas e relat√≥rios."><span class="ico">‚åÅ</span>Statistics</a>
          <a class="nav-item" href="#" data-tip="Configura√ß√µes do sistema."><span class="ico">‚öô</span>Settings</a>
        </div>
        <div class="nav-sep"></div>
        <div class="nav-group">
          <a class="nav-item" href="#" data-tip="Contatos e suporte."><span class="ico">‚úâ</span>Contact</a>
        </div>
      </nav>
      <button class="btn upgrade" data-tip="Funcionalidades premium (exemplo).">Upgrade</button>
    </aside>

    <main class="main">
      <header class="topbar card">
        <div class="title">
          <button class="hamb" aria-label="Menu" data-tip="Menu de navega√ß√£o.">‚ò∞</button>
          <h1>Dashboard</h1>
        </div>
        <div class="search-wrap">
          <input class="search" type="text" placeholder="Searching" data-tip="Pesquisa (n√£o funcional nesta vers√£o)." />
          <div class="icons">
            <span data-tip="Notifica√ß√µes.">üîî</span>
            <span data-tip="Prefer√™ncias.">‚öô</span>
          </div>
        </div>
      </header>

      <section class="status-line card">
        <div class="status-item" data-tip="Estado da conex√£o com a Binance.">
          <span class="label">Conex√£o</span>
          <span id="wsStatus" class="badge">Offline</span>
        </div>
        <div class="status-item" data-tip="Lat√™ncia estimada da atualiza√ß√£o.">
          <span class="label">Lat√™ncia</span>
          <span><strong id="latency">-</strong> ms</span>
        </div>
        <div class="status-item" data-tip="Hor√°rio do √∫ltimo tick recebido.">
          <span class="label">√öltimo tick</span>
          <span><strong id="lastTick">-</strong></span>
        </div>
      </section>

      <section class="kpi-row">
        <div class="kpi card kpi-green" data-tip="Pre√ßo negociado em tempo real (aggTrade).">
          <div class="kpi-head"><span class="muted">Pre√ßo atual</span></div>
          <div id="price" class="kpi-val">-</div>
          <div class="kpi-foot"><span class="chip chip-up">live</span></div>
        </div>
        <div class="kpi card kpi-blue" data-tip="Maior pre√ßo desde o √∫ltimo reset/novo topo.">
          <div class="kpi-head"><span class="muted">Pico recente</span></div>
          <div class="kpi-val"><span id="peak">-</span></div>
          <div class="kpi-foot"><span class="muted">h√° <strong id="peakAge">‚Äî</strong></span></div>
        </div>
        <div class="kpi card kpi-violet" data-tip="Varia√ß√£o com sinal vs. Pico: verde acima, vermelho abaixo.">
          <div class="kpi-head"><span class="muted">Drawdown</span></div>
          <div id="drawdown" class="kpi-val">-</div>
          <div class="kpi-foot"><span class="muted">vs. pico</span></div>
        </div>
      </section>

      <section class="middle">
        <div class="panel card" data-tip="Gr√°fico dos √∫ltimos ticks.">
          <div class="panel-head">
            <h3>Pre√ßo ‚Äì √öltimos ticks</h3>
            <div class="chart-controls">
              <label class="muted" data-tip="Tipo de gr√°fico.">Tipo</label>
              <select id="chartType" data-tip="Trocar entre Linha, √Årea, Barra e Candle.">
                <option value="line" selected>Linha</option>
                <option value="area">√Årea</option>
                <option value="bar">Barra</option>
                <option value="candle">Candle</option>
              </select>

              <label class="muted" data-tip="M√©dias m√≥veis sobre o gr√°fico.">M√©dias</label>
              <select id="maPreset" data-tip="Presets: desligado, EMA20, EMA20/50, EMA20/50/200, SMA20/50/200">
                <option value="off">Desligadas</option>
                <option value="ema20">EMA 20</option>
                <option value="ema2050" selected>EMA 20/50</option>
                <option value="ema2050200">EMA 20/50/200</option>
                <option value="sma2050200">SMA 20/50/200</option>
              </select>

              <label class="muted" data-tip="Janela de ticks usada no gr√°fico e tend√™ncia.">Tempo gr√°fico</label>
              <select id="trendWindow" data-tip="Quantidade de pontos (ticks) para an√°lise e exibi√ß√£o.">
                <option value="60" selected>60</option>
                <option value="120">120</option>
                <option value="240">240</option>
              </select>

              <label class="muted" data-tip="Intervalo das velas (apenas no modo Candle).">Candle TF</label>
              <select id="candleTf" data-tip="Intervalo de agrega√ß√£o das velas no modo Candle.">
                <option value="1s">1s</option><option value="2s">2s</option><option value="3s">3s</option><option value="4s">4s</option>
                <option value="5s" selected>5s</option><option value="10s">10s</option><option value="15s">15s</option><option value="20s">20s</option><option value="30s">30s</option>
                <option value="1m">1min</option><option value="2m">2min</option><option value="3m">3min</option><option value="4m">4min</option><option value="5m">5min</option>
                <option value="10m">10min</option><option value="15m">15min</option><option value="30m">30min</option>
                <option value="1h">1h</option><option value="2h">2h</option><option value="3h">3h</option><option value="4h">4h</option><option value="5h">5h</option>
                <option value="6h">6h</option><option value="7h">7h</option><option value="8h">8h</option><option value="9h">9h</option><option value="10h">10h</option>
                <option value="12h">12h</option><option value="14h">14h</option><option value="18h">18h</option>
                <option value="1d">1d</option><option value="2d">2d</option><option value="3d">3d</option><option value="4d">4d</option><option value="5d">5d</option>
                <option value="10d">10d</option><option value="15d">15d</option>
                <option value="1w">1sem</option><option value="2w">2sem</option>
                <option value="1mo">1mes</option><option value="6mo">6meses</option><option value="1y">1ano</option>
              </select>
            </div>
          </div>
          <div class="chart-area">
            <canvas id="priceChart"></canvas>
            <div id="candleContainer" aria-hidden="true"></div>
          </div>
          <div class="panel-foot"><span class="muted">Atualiza em tempo real</span></div>
        </div>

        <div class="panel card" data-tip="Eventos e atividades recentes.">
          <div class="panel-head"><h3>Recent Activity</h3></div>
          <ul class="activity">
            <li><span class="ico-bullet">‚¨§</span>Conex√£o de stream inicializada</li>
            <li><span class="ico-bullet">‚¨§</span>Alertas exibidos aqui conforme ocorrem</li>
          </ul>
          <ul id="events" class="events"></ul>
        </div>
      </section>

      <!-- Reposto: Data input -->
      <section class="grid-2">
        <div class="card" data-tip="Configura√ß√£o dos alertas e s√≠mbolo.">
          <div class="panel-head"><h3>Data input</h3></div>
          <div class="form-grid">
            <label>M√≠n (%)<input id="minThreshold" type="number" step="0.1" value="2.5" /></label>
            <label>M√°x (%)<input id="maxThreshold" type="number" step="0.1" value="3" /></label>
            <label>Reset (min)<input id="resetWindow" type="number" step="1" value="60" /></label>
            <label>S√≠mbolo<input id="symbol" type="text" value="btcusdt" /></label>
            <div class="form-actions">
              <button id="apply" class="btn">Aplicar</button>
              <button id="resetPeak" class="btn btn-soft">Resetar Pico</button>
              <button id="mute" class="btn btn-soft">Silenciar</button>
            </div>
          </div>
        </div>

        <div class="card" data-tip="Diagn√≥stico de conex√£o e erros.">
          <div class="panel-head"><h3>Diagn√≥stico</h3></div>
          <div class="results">
            <div class="res-row"><span class="muted">Endpoint</span><strong id="diagEndpoint">-</strong></div>
            <div class="res-row"><span class="muted">Estado</span><strong id="diagState">Offline</strong></div>
            <div class="res-row"><span class="muted">√öltimo erro</span><span id="diagError" class="muted">-</span></div>
            <div class="res-row"><span class="muted">Evento</span><span id="diagEvent" class="muted">-</span></div>
            <div class="res-row"><span class="muted">Tentativas</span><strong id="diagAttempts">0</strong></div>
            <div class="res-row"><span class="muted">√öltimo tick</span><strong id="diagLastTick">-</strong></div>
          </div>
        </div>
      </section>

      <section class="card" data-tip="Somente picos finalizados com dura√ß√£o > 10s s√£o registrados.">
        <div class="panel-head">
          <h3>Picos recentes</h3>
          <div class="actions">
            <button id="exportPeaks" class="btn-soft">Exportar CSV</button>
            <button id="savePeaks" class="btn-soft">Salvar edi√ß√µes</button>
            <button id="clearPeaks" class="btn-soft">Limpar</button>
          </div>
        </div>
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Data/Hora</th><th>Pre√ßo</th><th>Dura√ß√£o</th><th>DD m√°x</th><th>Origem</th>
              </tr>
            </thead>
            <tbody id="peaksBody"></tbody>
          </table>
        </div>
        <small class="muted">Registra apenas picos finalizados com dura√ß√£o > 10s.</small>
      </section>

      <footer class="footer muted">Informativo. N√£o executa ordens.</footer>
    </main>
  </div>

  <audio id="beep" src="data:audio/wav;base64,UklGRoQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=" preload="auto"></audio>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
  <script src="app.js"></script>
</body>
</html>